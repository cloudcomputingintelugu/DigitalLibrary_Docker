{% extends 'base.html' %}
{% block title %}My Borrowed Books{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2><i class="fas fa-bookmark me-2"></i>My Borrowed Books</h2>
    <span class="badge bg-primary p-2">{{ books|length }} books borrowed</span>
</div>

{% if books %}
<div class="row">
    {% for book in books %}
    <div class="col-xl-4 col-lg-6 mb-4">
        <div class="card h-100">
            <div class="card-body">
                <div class="d-flex justify-content-between">
                    <h5 class="card-title">{{ book.title }}</h5>
                    <span class="badge bg-warning text-dark">Borrowed</span>
                </div>
                <h6 class="card-subtitle mb-2 text-muted">By {{ book.author }}</h6>
                <p class="card-text">Borrowed on: {{ book.borrow_date }}</p>
                <div class="progress mb-3" style="height: 10px;">
                    <div class="progress-bar bg-success" role="progressbar" style="width: 65%;" aria-valuenow="65" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <p class="small text-muted">Due in 7 days</p>
                
                <!-- Action buttons with individual URLs for each book -->
                <div class="d-grid gap-2">
                    {% if "Docker" in book.title %}
                    <!-- Docker Read Now button -->
                    <a href="https://docker77.hashnode.dev" 
                       target="_blank" 
                       class="btn btn-outline-primary">
                       <i class="fas fa-eye me-1"></i> Read Docker Guide
                    </a>
                    
                    <!-- Docker Download button -->
                    <a href="https://drive.google.com/uc?export=download&id=1rVuFVl6GIRci4CtFKVjacT-rnZ38yCjy" 
                       class="btn btn-outline-success" 
                       download>
                       <i class="fas fa-download me-1"></i> Download Docker PDF
                    </a>
                    
                    {% elif "Kubernetes" in book.title %}
                    <!-- Kubernetes Read Now button -->
                    <a href="https://mustafa-k8s.hashnode.dev" 
                       target="_blank" 
                       class="btn btn-outline-primary">
                       <i class="fas fa-eye me-1"></i> Read Kubernetes Guide
                    </a>
                    
                    <!-- Kubernetes Download button -->
                    <a href="https://drive.google.com/uc?export=download&id=1whcCnntMRue3ooCIMM5T8jzhbetRIcML" 
                       class="btn btn-outline-success" 
                       download>
                       <i class="fas fa-download me-1"></i> Download Kubernetes PDF
                    </a>
                    
                    {% elif "Terraform" in book.title %}
                    <!-- Terraform Read Now button -->
                    <a href="https://iaac.hashnode.dev" 
                       target="_blank" 
                       class="btn btn-outline-primary">
                       <i class="fas fa-eye me-1"></i> Read Terraform Guide
                    </a>
                    
                    <!-- Terraform Download button -->
                    <a href="https://drive.google.com/uc?export=download&id=1dc0yvWuH3eiB9jgNZkHoC8m-HodJb41M" 
                       class="btn btn-outline-success" 
                       download>
                       <i class="fas fa-download me-1"></i> Download Terraform PDF
                    </a>
                    
                    {% else %}
                    <!-- Default buttons for other books -->
                    <a href="https://docs.google.com/document/d/1Lp2Bk0-8vzQqQqQqQqQqQqQqQqQqQqQqQqQqQqQ/preview" 
                       target="_blank" 
                       class="btn btn-outline-primary">
                       <i class="fas fa-eye me-1"></i> Read Now
                    </a>
                    
                    <a href="https://drive.google.com/uc?export=download&id=1Lp2Bk0-8vzQqQqQqQqQqQqQqQqQqQqQqQqQqQqQ" 
                       class="btn btn-outline-success" 
                       download>
                       <i class="fas fa-download me-1"></i> Download PDF
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="text-center py-5">
    <i class="fas fa-book-open fa-4x text-muted mb-3"></i>
    <h3 class="text-muted">No books borrowed yet</h3>
    <p>Start exploring our collection and borrow your first book!</p>
    <a href="{{ url_for('books') }}" class="btn btn-primary mt-2"><i class="fas fa-book me-1"></i> Browse Books</a>
</div>
{% endif %}

<!-- Instructions for adding your own Google Drive links -->
<div class="card mt-4">
    <div class="card-header bg-light">
        <h5 class="mb-0"><i class="fas fa-info-circle me-2"></i>How to Add Your Own Documents</h5>
    </div>
</div>

<style>
    .btn {
        transition: all 0.3s ease;
    }
    
    .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    
    .card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    
    /* Book-specific styling */
    .card-title {
        position: relative;
        padding-bottom: 10px;
    }
    
    .card-title::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 40px;
        height: 3px;
        border-radius: 2px;
    }
    
    /* Docker-specific styling */
    .card:has(.card-title:contains("Docker")) .card-title::after {
        background-color: #2496ed;
    }
    
    .card:has(.card-title:contains("Docker")) .btn-outline-primary:hover {
        background-color: #2496ed;
        border-color: #2496ed;
    }
    
    /* Kubernetes-specific styling */
    .card:has(.card-title:contains("Kubernetes")) .card-title::after {
        background-color: #326ce5;
    }
    
    .card:has(.card-title:contains("Kubernetes")) .btn-outline-primary:hover {
        background-color: #326ce5;
        border-color: #326ce5;
    }
    
    /* Terraform-specific styling */
    .card:has(.card-title:contains("Terraform")) .card-title::after {
        background-color: #5c4ee5;
    }
    
    .card:has(.card-title:contains("Terraform")) .btn-outline-primary:hover {
        background-color: #5c4ee5;
        border-color: #5c4ee5;
    }
</style>

<script>
    // Add specific styling based on book title
    document.addEventListener('DOMContentLoaded', function() {
        const cards = document.querySelectorAll('.card');
        
        cards.forEach(card => {
            const titleElement = card.querySelector('.card-title');
            if (titleElement) {
                const title = titleElement.textContent;
                
                if (title.includes('Docker')) {
                    card.classList.add('docker-book');
                } else if (title.includes('Kubernetes')) {
                    card.classList.add('kubernetes-book');
                } else if (title.includes('Terraform')) {
                    card.classList.add('terraform-book');
                }
            }
        });
    });
</script>
{% endblock %}
